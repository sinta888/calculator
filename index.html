<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NTU Cost of Living & Tuition Fee Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.5; }
    h2 { margin-top: 40px; }
    .section { margin-bottom: 30px; }
    .options label { display: block; margin: 6px 0; }
    button { margin-top: 20px; padding: 10px 20px; cursor: pointer; }
    .result { margin-top: 30px; padding: 15px; border: 1px solid #ccc; background: #f9f9f9; }
  </style>
</head>
<body>
  <h1>NTU Cost of Living & Tuition Fee Calculator</h1>

  <!-- Section 1: Cost of Living -->
  <h2>1. Cost of Living</h2>

  <div class="section" id="accommodation">
    <h3>Accommodation</h3>
    <label><input type="radio" name="accom" data-min="470" data-max="688"> On-campus ($470 – $688)</label>
    <label><input type="radio" name="accom" data-min="900" data-max="2650"> Room in a condominium ($900 – $2,650)</label>
    <label><input type="radio" name="accom" data-min="500" data-max="2200"> Room in a government flat ($500 – $2,200)</label>
    <label><input type="radio" name="accom" data-min="1599" data-max="4500"> Studio in a condominium ($1,599 – $4,500)</label>
    <label><input type="radio" name="accom" data-min="3300" data-max="7300"> Condo, 2 bedrooms ($3,300 – $7,300)</label>
    <label><input type="radio" name="accom" data-min="2700" data-max="3200"> HDB flat, 2 bedrooms ($2,700 – $3,200)</label>
    <label><input type="radio" name="accom" data-min="6000" data-max="10000"> Landed property ($6,000 – $10,000)</label>
  </div>

  <div class="section" id="medical">
    <h3>Medical</h3>
    <label><input type="radio" name="medical" data-min="158" data-max="240"> Public clinics (non-residents) ($158 – $240 monthly)</label>
    <label><input type="radio" name="medical" data-min="72" data-max="100"> Public clinics (permanent residents) ($72 – $100 monthly)</label>
    <label><input type="radio" name="medical" data-min="60" data-max="200"> Private clinics ($60 – $200 monthly)</label>
  </div>

  <div class="section" id="transport">
    <h3>Transport</h3>
    <label><input type="radio" name="transport" data-min="66" data-max="120"> Public transport ($66 – $120)</label>
    <label><input type="radio" name="transport" data-min="900" data-max="900"> Taxis ($900)</label>
    <label><input type="radio" name="transport" data-min="2560" data-max="3500"> Personal vehicle ($2,560 – $3,500)</label>
  </div>

  <div class="section" id="meals">
    <h3>Meals</h3>
    <label><input type="radio" name="meals" data-min="315" data-max="720"> Budget ($3.5 – $8 per meal, ~90 meals)</label>
    <label><input type="radio" name="meals" data-min="2520" data-max="4500"> Mid-priced, family (~90 meals, $28 – $50)</label>
    <label><input type="radio" name="meals" data-min="11520" data-max="43200"> Luxury fine dining (~90 meals, $128 – $480)</label>
    <label><input type="radio" name="meals" data-min="150" data-max="225"> Homecooked ($150 – $225 monthly)</label>
    <label><input type="radio" name="meals" data-min="510" data-max="732"> Homecooked delivery ($510 – $732)</label>
  </div>

  <div class="section" id="apparel">
    <h3>Apparel & Footwear</h3>
    <label><input type="radio" name="apparel" data-min="8.9" data-max="48"> Budget brands ($8.9 – $48)</label>
    <label><input type="radio" name="apparel" data-min="50" data-max="219"> Mid-range ($50 – $219)</label>
    <label><input type="radio" name="apparel" data-min="390" data-max="2230"> Luxury ($390 – $2,230)</label>
  </div>

  <div class="section" id="comm">
    <h3>Communications & Home Entertainment (multi-select)</h3>
    <label><input type="checkbox" name="comm" data-min="30" data-max="50"> Internet ($30 – $50)</label>
    <label><input type="checkbox" name="comm" data-min="10" data-max="80"> Mobile ($10 – $80)</label>
    <label><input type="checkbox" name="comm" data-min="43" data-max="67"> Streaming ($43 – $67)</label>
    <label><input type="checkbox" name="comm" data-all="true"> All of the above</label>
  </div>

  <div class="section" id="recreation">
    <h3>Recreation (multi-select)</h3>
    <label><input type="checkbox" name="recreation" data-min="8.5" data-max="13.5"> Movies</label>
    <label><input type="checkbox" name="recreation" data-min="110" data-max="150"> Clubbing</label>
    <label><input type="checkbox" name="recreation" data-min="10" data-max="27"> Art & museums</label>
    <label><input type="checkbox" name="recreation" data-min="78" data-max="303"> Concerts</label>
    <label><input type="checkbox" name="recreation" data-min="34" data-max="85"> Theme parks & zoos</label>
    <label><input type="checkbox" name="recreation" data-all="true"> All of the above</label>
  </div>

  <button onclick="calcLiving()">Calculate Cost of Living</button>

  <div class="result" id="livingResult"></div>

  <!-- Section 2: Tuition Fees -->
  <h2>2. Tuition Fees</h2>

  <div class="section" id="tuition">
    <h3>Select Status</h3>
    <label><input type="radio" name="status" value="intl"> International Student</label>
    <label><input type="radio" name="status" value="scspr"> Singapore Citizen / Permanent Resident</label>

    <h3>Financial Aid (SC/SPR only)</h3>
    <label><input type="radio" name="aid" value="none" checked> None</label>
    <label><input type="radio" name="aid" value="yes"> Yes (up to $15,000)</label>

    <h3>NTU Alumni?</h3>
    <label><input type="checkbox" id="alumni"> Yes</label>
  </div>

  <button onclick="calcTuition()">Calculate Tuition Fees</button>

  <div class="result" id="tuitionResult"></div>

  <h2>Final Combined Output</h2>
  <div class="result" id="finalResult"></div>

  <script>
    function calcLiving() {
      let min = 0, max = 0;

      function addChecked(selector) {
        document.querySelectorAll(selector + ":checked").forEach(el => {
          if (el.dataset.all === "true") {
            // All of the above: sum all siblings (ignore this one)
            let group = el.name;
            let sumMin = 0, sumMax = 0;
            document.querySelectorAll("input[name='" + group + "']").forEach(x => {
              if (!x.dataset.all) {
                sumMin += parseFloat(x.dataset.min);
                sumMax += parseFloat(x.dataset.max);
              }
            });
            min += sumMin; max += sumMax;
          } else {
            min += parseFloat(el.dataset.min);
            max += parseFloat(el.dataset.max);
          }
        });
      }

      // Single-select sections
      ["accom","medical","transport","meals","apparel"].forEach(name => {
        let sel = document.querySelector("input[name='"+name+"']:checked");
        if (sel) { min += parseFloat(sel.dataset.min); max += parseFloat(sel.dataset.max); }
      });

      // Multi-select
      addChecked("input[name='comm']");
      addChecked("input[name='recreation']");

      document.getElementById("livingResult").innerHTML =
        `<b>Estimated Monthly Cost of Living:</b><br>$${min.toLocaleString()} – $${max.toLocaleString()}`;
      document.getElementById("finalResult").innerHTML =
        `<b>Cost of Living:</b> $${min.toLocaleString()} – $${max.toLocaleString()}`;
    }

    function calcTuition() {
      let base = 56156.80; // 30 AUs minimum total
      let status = document.querySelector("input[name='status']:checked");
      let aid = document.querySelector("input[name='aid']:checked").value;
      let alumni = document.getElementById("alumni").checked;

      if (!status) {
        alert("Please select a status."); return;
      }

      let tuition = base;

      if (status.value === "scspr") {
        tuition -= 5000; // base subsidy
        if (aid === "yes") tuition -= 15000; // financial aid
      }

      if (alumni) tuition *= 0.9; // 10% rebate

      document.getElementById("tuitionResult").innerHTML =
        `<b>Estimated Tuition Fees:</b><br>$${tuition.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`;

      document.getElementById("finalResult").innerHTML +=
        `<br><b>Tuition Fees:</b> $${tuition.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`;
    }
  </script>
</body>
</html>
